{{title: fssg - Fast, Simple Static Site Generator}}

<main>
  <section class="hero">
    <div class="container">
      <img
        src="{{BASE_URL}}/static/img/logo.png"
        alt="fssg Logo"
        class="logo"
      />
      <h1>fssg</h1>
      <p class="tagline">Tiny, dependency-free static site generator</p>

      <p class="description">
        Convert Markdown and html into a deployable site with just pure POSIX shell.
      </p>

      <div class="cta-buttons">
        <a
          href="https://github.com/xlc-dev/fssg"
          target="_blank"
          class="btn btn-primary"
        >
          View on GitHub
        </a>
        <a href="#quick-start" class="btn btn-secondary">Get Started</a>
      </div>
    </div>
  </section>

  <section id="why-fssg" class="feature-showcase-section reveal">
    <div class="container">
      <h2>Why Choose fssg?</h2>

      <div class="feature-showcase-item">
        <div class="feature-text">
          <h3>Run Anywhere</h3>
          <p>
            If you have a POSIX shell and an awk implementation, fssg runs. No
            Node, no package managers — just one script you can drop into a
            project.
          </p>
        </div>
        <div class="feature-visual">
          <pre><code class="language-bash">.
├── fssg
└── src
    ├── index.md
    └── template.html</code></pre>
        </div>
      </div>

      <div class="feature-showcase-item">
        <div class="feature-text">
          <h3>Fast & Parallel</h3>
          <p>
            Rendering is handled with optimized AWK routines; pages are
            processed in parallel child processes. The default concurrency is
            100 so large sites build quickly.
          </p>
        </div>
        <div class="feature-visual">
          <pre><code class="language-bash">./fssg -j 100</code></pre>
        </div>
      </div>

      <div class="feature-showcase-item">
        <div class="feature-text">
          <h3>Simple, Focused Tooling</h3>
          <p>
            Built-in watcher, optional dev server and autoreload script give a
            modern workflow without adding dependencies. Server selection
            prefers a local ./mongoose binary, then system mongoose, then
            python3 / python. You can override the exact server command.
          </p>
        </div>
        <div class="feature-visual">
          <pre><code class="language-bash">./fssg -j 100 -s -w -o</code></pre>
        </div>
      </div>
    </div>
  </section>

  <section id="quick-start" class="quick-start-section reveal">
    <div class="container">
      <h2>Quick Start Guide</h2>

      <div class="steps-container">
        <div class="step">
          <div class="step-number">1</div>
          <div class="step-content">
            <h3>Install</h3>
            <p>
              Download the single script or clone the repo if you want the
              optional mongoose dev-server binaries.
            </p>

            <p><strong>Option A: script only</strong></p>
            <div class="code-block-wrapper">
              <pre><code class="language-bash">wget https://raw.githubusercontent.com/xlc-dev/fssg/main/fssg
chmod +x fssg</code></pre>
            </div>

            <p><strong>Option B: clone (and copy what you need)</strong></p>
            <div class="code-block-wrapper">
              <pre><code class="language-bash">git clone https://github.com/xlc-dev/fssg.git
mkdir mysite && cd mysite
cp ../fssg/fssg .
cp -r ../fssg/mongoose .</code></pre>
            </div>

            <p class="muted">
              fssg requires an awk available on PATH. To use a specific awk, set
              <code>FSSG_AWK</code> (for example <code>FSSG_AWK=gawk</code>).
            </p>
          </div>
        </div>

        <div class="step">
          <div class="step-number">2</div>
          <div class="step-content">
            <h3>Create Content</h3>
            <p>
              Put your template at <code>src/template.html</code> and your pages
              under <code>src/</code> as <code>.md</code> or <code>.html</code>.
              fssg injects processed page content into the master template at
              <code>&#123;&#123;content&#125;&#125;</code>.
            </p>

            <p><strong>Example: src/template.html</strong></p>
            <div class="code-block-wrapper">
              <pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;meta charset="utf-8"&gt;
  &lt;meta name="viewport" content="width=device-width,initial-scale=1"&gt;
  &lt;title&gt;&#123;&#123;title&#125;&#125;&lt;/title&gt;
  &lt;link rel="stylesheet" href="&#123;&#123;BASE_URL&#125;&#125;/static/css/styles.css"&gt;
&lt;/head&gt;
&lt;body&gt;
  &#123;&#123;content&#125;&#125;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
            </div>

            <p><strong>Example: src/index.md</strong></p>
            <div class="code-block-wrapper">
              <pre><code class="language-markdown"># Hello, World!

This is my first page built with fssg.</code></pre>
            </div>
          </div>
        </div>

        <div class="step">
          <div class="step-number">3</div>
          <div class="step-content">
            <h3>Build & Preview</h3>
            <p>
              Build the site and (optionally) start the dev server and watcher:
            </p>
            <div class="code-block-wrapper">
              <pre><code class="language-bash">./fssg -s -w -o</code></pre>
            </div>
            <p>
              Default dev-server port is <code>8000</code> (override via
              <code>FSSG_SERVER_PORT</code>). When watching or serving fssg
              writes <code>dist/.reload</code> and injects a small autoreload
              client that polls <code>/.reload</code> to trigger reloads.
            </p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section id="documentation" class="documentation-section reveal">
    <div class="container">
      <h2>Features & Documentation</h2>

      <div class="docs-container">
        <ul class="doc-tabs">
          <li class="doc-tab active" data-tab="cli">CLI</li>
          <li class="doc-tab" data-tab="structure">Directory Structure</li>
          <li class="doc-tab" data-tab="templating">Templating</li>
          <li class="doc-tab" data-tab="content">Content & Assets</li>
          <li class="doc-tab" data-tab="conditionals">Conditionals</li>
          <li class="doc-tab" data-tab="server">Server & Watch</li>
        </ul>

        <div class="doc-content-panels">
          <div class="doc-panel active" id="cli">
            <article>
              <h3>Command-Line Interface</h3>

              <div class="code-block-wrapper">
                <pre><code class="language-bash">./fssg [options]</code></pre>
              </div>

              <ul>
                <li><code>-h, --help</code>: Show help and exit.</li>
                <li>
                  <code>-V, --version</code>: Print the script's version and
                  exit.
                </li>
                <li>
                  <code>-q, --quiet</code>: Suppress informational output
                  (errors still shown).
                </li>
                <li>
                  <code>-v, --verbose</code>: Enable verbose debug logging.
                </li>
                <li>
                  <code>-n, --nocolor</code>: Disable ANSI color sequences in
                  messages.
                </li>
                <li>
                  <code>-w, --watch</code>: Watch the <code>src/</code> tree and
                  rebuild on changes.
                </li>
                <li>
                  <code>-s, --serve</code>: Start a dev server for
                  <code>dist/</code>. fssg prefers a local
                  <code>./mongoose</code> binary, then system
                  <code>mongoose</code>, then <code>python3</code>, then
                  <code>python</code>.
                </li>
                <li>
                  <code>-o, --open</code>: Open the browser after starting the
                  server (use with -s).
                </li>
                <li>
                  <code>-m, --minify</code>: Disable the HTML minifier
                  (minification is enabled by default). This flag turns
                  minification off for debugging.
                </li>
                <li>
                  <code>-j &lt;num&gt;</code>: Number of parallel build jobs
                  (default: 100).
                </li>
              </ul>

              <h4>Environment variables</h4>
              <ul>
                <li>
                  <code>FSSG_BASE_URL</code>: Base URL value that fssg
                  substitutes for
                  <code>&#123;&#123;BASE_URL&#125;&#125;</code> inside templates
                  and includes at build time. (Default: empty string, which
                  yields root-relative paths.)
                </li>
                <li>
                  <code>FSSG_SERVER_CMD</code>: Override the dev-server command
                  used by <code>-s</code>.
                </li>
                <li>
                  <code>FSSG_SERVER_PORT</code>: Port used by the dev server
                  (default: 8000).
                </li>
                <li>
                  <code>FSSG_AWK</code> / <code>FSSG_AWK_OPTS</code>: Customize
                  the awk program and options.
                </li>
              </ul>
            </article>
          </div>

          <div class="doc-panel" id="structure">
            <article>
              <h3>Project Structure</h3>

              <div class="code-block-wrapper">
                <pre><code class="language-bash">.
├── fssg
├── mongoose/
│   ├── mongoose_linux
│   ├── mongoose_macos
│   └── mongoose_windows.exe
└── src/
    ├── includes/
    ├── static/
    ├── template.html
    ├── index.md
    └── about.html</code></pre>
              </div>

              <ul>
                <li><code>src/</code>: Source files (Markdown and HTML).</li>
                <li>
                  <code>mongoose/</code>: Optional dev-server executables.
                </li>
                <li>
                  <code>src/template.html</code>: Master layout. Must include
                  <code>&#123;&#123;content&#125;&#125;</code>.
                </li>
                <li>
                  <code>src/includes/</code>: Reusable snippets (use
                  <code>&#123;&#123;include: ...&#125;&#125;</code>).
                </li>
                <li>
                  <code>src/static/</code>: Copied to
                  <code>dist/static/</code> unchanged.
                </li>
                <li>
                  <code>dist/</code>: Generated site output (created by fssg).
                </li>
              </ul>
            </article>
          </div>

          <div class="doc-panel" id="templating">
            <article>
              <h3>Templating & Title Rules</h3>

              <h4>Title precedence</h4>
              <p>The title is chosen by these rules (highest → lowest):</p>
              <ol>
                <li>
                  An explicit title directive inside the source file:
                  <code>&#123;&#123;title: My Page&#125;&#125;</code> (this is
                  removed from the rendered content and becomes the page title).
                </li>
                <li>
                  If none present, a title is generated from the filename:
                  hyphens become spaces and each word is capitalized.
                </li>
              </ol>

              <p>Examples:</p>
              <ul>
                <li><code>src/my-first-post.md</code> → "My First Post"</li>
                <li>
                  <code>src/2025-10-06-my-post.md</code> → "2025 10 06 My Post"
                  (the date prefix is not stripped)
                </li>
                <li>
                  <code>src/my_first_post.md</code> → "My_first_post"
                  (underscores kept)
                </li>
              </ul>

              <p class="muted">Implementation caveats:</p>
              <ul>
                <li>
                  fssg searches only the primary source file for the title
                  directive. A <code>title</code> inside an included file will
                  not set the page title.
                </li>
                <li>
                  The extracted title is taken as-is by the code that finds it
                  (no extra trimming), so keep the directive line clean.
                </li>
              </ul>

              <h4>Includes</h4>
              <p>Simple include from <code>src/includes/</code>:</p>
              <div class="code-block-wrapper">
                <pre><code class="language-bash">&#123;&#123;include: footer.html&#125;&#125;</code></pre>
              </div>

              <h4>Include-blocks with parameters</h4>
              <p>
                Pass named parameters and a content block to an include. Inside
                the include file use
                <code>&#123;&#123;content&#125;&#125;</code>
                to inject the provided block. If you pass
                <code>markdown="true"</code> (or <code>markdown=1</code>), the
                block is converted to HTML before injection.
              </p>

              <div class="code-block-wrapper">
                <pre><code class="language-bash">&#123;&#123;include-block: alert.html type="warning" alert_title="Attention" markdown="true"&#125;&#125;
This is **Markdown** content inside the block.
&#123;&#123;endinclude&#125;&#125;</code></pre>
              </div>

              <p class="muted">
                If an include-block with <code>markdown="true"</code>
                produces a full HTML document (contains a DOCTYPE or an
                <code>&lt;html&gt;</code>
                tag), fssg treats the page as pre-rendered HTML and skips the
                page-level Markdown pass.
              </p>
            </article>
          </div>

          <div class="doc-panel" id="content">
            <article>
              <h3>Content Processing & Assets</h3>

              <h4>Markdown support</h4>
              <p>
                fssg includes an AWK-based Markdown parser with support for:
              </p>
              <ul>
                <li>Headings, paragraphs, and raw HTML passthrough</li>
                <li>Blockquotes, fenced code blocks and inline code</li>
                <li>Lists (unordered/ordered), links, images</li>
                <li>Bold/italic/strikethrough, horizontal rules</li>
                <li>Tables (pipe-style)</li>
              </ul>

              <h4>Static assets</h4>
              <p>
                Everything under <code>src/static/</code> is copied to
                <code>dist/static/</code> unchanged. Use
                <code>&#123;&#123;BASE_URL&#125;&#125;</code> in templates to
                build correct deploy-time prefixes — in documentation examples
                encode the braces as
                <code>&#123;&#123;BASE_URL&#125;&#125;</code>
                so they appear literally in the generated docs.
              </p>

              <h4>Style & script hoisting</h4>
              <p>
                fssg collects <code>&lt;style&gt;...&lt;/style&gt;</code>
                blocks and emits them immediately before the closing
                <code>&lt;/head&gt;</code>, and collects
                <code>&lt;script&gt;...&lt;/script&gt;</code> blocks and emits
                them immediately before the closing <code>&lt;/body&gt;</code>.
                The discovery order is preserved. fssg does not deduplicate
                identical blocks.
              </p>

              <h4>Minification</h4>
              <p>Minification is enabled by default. The minifier:</p>
              <ul>
                <li>Removes HTML comments and extra whitespace</li>
                <li>Cleans attribute whitespace inside tags</li>
                <li>Preserves <code>&lt;pre&gt;</code> blocks verbatim</li>
                <li>
                  Strips CSS and JS comments inside hoisted
                  <code>&lt;style&gt;</code> and
                  <code>&lt;script&gt;</code> blocks
                </li>
              </ul>
              <p class="muted">
                Use <code>-m</code> to disable minification while debugging.
              </p>

              <h4>Auto-reload</h4>
              <p>
                When using the watcher or serving, fssg writes a timestamp into
                <code>dist/.reload</code> and injects a small client script that
                polls <code>/.reload</code>. If you host your built site under a
                subpath, ensure the dev server exposes <code>/.reload</code>, or
                override the server with <code>FSSG_SERVER_CMD</code>.
              </p>
            </article>
          </div>

          <div class="doc-panel" id="conditionals">
            <article>
              <h3>Conditionals</h3>
              <p>
                fssg supports simple conditional blocks using exact string
                equality. Use <code>IF_PAGE</code> / <code>ELIF_PAGE</code> /
                <code>ELSE_PAGE</code> / <code>ENDIF_PAGE</code> to test the
                output path (relative to <code>dist/</code>), or
                <code>IF_EXT</code> / <code>ELIF_EXT</code> /
                <code>ELSE_EXT</code> / <code>ENDIF_EXT</code> to test the
                source file extension.
              </p>

              <h4>By output page path</h4>
              <div class="code-block-wrapper">
                <pre><code class="language-bash">&#123;&#123;IF_PAGE: index.html&#125;&#125;
  &lt;p&gt;Only for the homepage.&lt;/p&gt;
&#123;&#123;ELIF_PAGE: about.html&#125;&#125;
  &lt;p&gt;Only for the about page.&lt;/p&gt;
&#123;&#123;ELSE_PAGE&#125;&#125;
  &lt;p&gt;For all other pages.&lt;/p&gt;
&#123;&#123;ENDIF_PAGE&#125;&#125;</code></pre>
              </div>

              <h4>By source extension</h4>
              <div class="code-block-wrapper">
                <pre><code class="language-bash">&#123;&#123;IF_EXT: md&#125;&#125;
  &lt;p&gt;This content was originally Markdown.&lt;/p&gt;
&#123;&#123;ELIF_EXT: html&#125;&#125;
  &lt;p&gt;This content was originally HTML.&lt;/p&gt;
&#123;&#123;ELSE_EXT&#125;&#125;
  &lt;p&gt;Other source formats.&lt;/p&gt;
&#123;&#123;ENDIF_EXT&#125;&#125;</code></pre>
              </div>

              <p class="muted">
                Conditions are evaluated during template processing. They match
                exact strings, no globs or regexes and support nesting.
              </p>
            </article>
          </div>

          <div class="doc-panel" id="server">
            <article>
              <h3>Server, Watcher & Overrides</h3>

              <h4>Dev server selection</h4>
              <p>When <code>-s</code> is used to serve:</p>
              <ol>
                <li>
                  If <code>FSSG_SERVER_CMD</code> is set, fssg runs that command
                  verbatim.
                </li>
                <li>
                  If a local <code>./mongoose</code> directory exists, fssg
                  looks for a platform-specific executable and runs it with
                  <code>-d dist/ -v 0</code>.
                </li>
                <li>If <code>mongoose</code> is in PATH it will be used.</li>
                <li>
                  Otherwise fssg falls back to
                  <code>python3 -m http.server &lt;port&gt;</code> or
                  <code>python -m SimpleHTTPServer &lt;port&gt;</code>.
                </li>
              </ol>

              <h4>Watcher</h4>
              <p>
                The watcher computes a checksum snapshot of all files in
                <code>src/</code>
                and triggers a rebuild when the snapshot changes. It is portable
                and doesn't require platform-specific file-watching APIs.
              </p>

              <h4>Open browser</h4>
              <p>
                Use <code>-o</code> together with <code>-s</code> to open the
                default browser automatically (<code>open</code> on macOS,
                <code>xdg-open</code> on Linux, or <code>start</code> on
                Windows).
              </p>
            </article>
          </div>
        </div>
      </div>
    </div>
  </section>
</main>

<footer class="footer">
  <div class="container">
    <p>
      Built with fssg by
      <a href="https://github.com/xlc-dev" target="_blank">xlcdev</a>.
    </p>
    <p>
      The fssg script is released under the
      <a
        href="https://github.com/xlc-dev/fssg/blob/main/LICENSE"
        target="_blank"
        >MIT License</a
      >.
    </p>
  </div>
</footer>